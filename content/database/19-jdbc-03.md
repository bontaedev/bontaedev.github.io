---
emoji: ğŸª¤
title: JDBC 3ì¼ì°¨ - DBCP
date: '2022-04-13 21:48:00'
author: bontaedev
tags: database jdbc webdev study
categories: database
---

## DBCP

- DBì˜ ì ‘ì†ëŸ‰ì—ëŠ” í•œê³„ê°€ ìˆë‹¤. ë¬´í•œì •ìœ¼ë¡œ ê°ì²´ë¥¼ ìƒì„±í•˜ë©´ ì„œë²„ì— ê³¼ë¶€í•˜.
- Database Connection Pool : í•œì •ëœ Connectionë§Œ ë§Œë“¤ ìˆ˜ ìˆê²Œ ì œí•œ
- DB Connection Pool(DBCP) : ì»¤ë„¥ì…˜ ê°ì²´ê°€ ë‹´ê¸¸ ìˆ˜ ìˆëŠ” ê³µê°„
- Connection Poolì„ ì´ìš©í•´ì„œ ì§€ì •ëœ ê°œìˆ˜ë§Œí¼ Connection ê°ì²´ë¥¼ ìƒì„±í•´ë†“ê³  ì„ ì°©ìˆœìœ¼ë¡œ ì ‘ì†í•œ í´ë¼ì´ì–¸íŠ¸ì— ê°€ì§€ê³  ìˆëŠ” Connectionì„ ë¶„ë°°í•˜ê³  ê·¸ ë’¤ë¡œ ë“¤ì–´ì˜¤ëŠ” í´ë¼ì´ì–¸íŠ¸ë“¤ì€ ì•ì˜ í´ë¼ì´ì–¸íŠ¸ë“¤ì´ Connectionì„ ë°˜ë‚©í•  ë•Œê¹Œì§€ ëŒ€ê¸°
- ì—¬ê¸°ì„œëŠ” Apache Common DBCPë¥¼ ì‚¬ìš©

## DBCP ë¼ì´ë¸ŒëŸ¬ë¦¬ ë‹¤ìš´ë¡œë“œ, ì ìš©

- BasicDataSource í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± : DBCPë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” í´ë˜ìŠ¤
- DBCPë¥¼ êµ¬ì„±í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ì„¤ì •ê°’

```java
...
private BasicDataSource bds = new BasicDataSource();

public CafeDAO() {
		// CafeDAO ìƒì„±ìê°€ í˜¸ì¶œë˜ë©´ ìë™ìœ¼ë¡œ bdsì— ì„¤ì •ê°’ì„ ë¶€ì—¬í•˜ë„ë¡
		bds.setUrl("jdbc:oracle:thin:@localhost:1521:xe");
		bds.setUsername("kh");
		bds.setPassword("kh");
		// ì»¤ë„¥ì…˜ ê°¯ìˆ˜ë„ ì„¤ì •
		bds.setInitialSize(10);
	}

// ì»¤ë„¥ì…˜ í’€ì— ìˆëŠ” ì»¤ë„¥ì…˜ì„ êº¼ë‚´ì„œ ë°˜í™˜í•´ì£¼ëŠ” ë©”ì„œë“œ
	public Connection getConnection() throws Exception {
		return bds.getConnection();
	}
```

## Singleton íŒ¨í„´ ì ìš©

- ìœ„ì˜ BasicDataSourceë¥¼ í†µí•´ ì»¤ë„¥ì…˜ í’€ì„ ë°˜í™˜í•˜ëŠ” ê³¼ì •ì„ ì‹±ê¸€í†¤ íŒ¨í„´ì„ ì ìš©í•˜ì—¬ ì—¬ëŸ¬ê°œì˜ ë°ì´í„° í’€ì´ ìƒì„±ë˜ëŠ” ê²ƒì„ ë°©ì§€í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„í•œë‹¤.
  - ìƒì„±ìë¥¼ privateìœ¼ë¡œ ì„¤ì •í•˜ê³ 
  - getInstance() ë©”ì„œë“œë¥¼ ì§€ì •í•´ instance ë³€ìˆ˜ì— í•˜ë‚˜ë§Œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë„ë¡ ë©”ì„œë“œë¥¼ êµ¬ì„±í•œë‹¤.
  - ë©”ì¸ í”„ë¡œê·¸ë¨ì—ì„œëŠ” getInstanceë¥¼ í†µí•´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•œë‹¤.

```java
private BasicDataSource bds = new BasicDataSource();
private static CafeDAO instance = null;

private CafeDAO() { // CafeDAO ìƒì„±ìë¥¼ privateìœ¼ë¡œ ë³€ê²½
		bds.setUrl("jdbc:oracle:thin:@localhost:1521:xe");
		bds.setUsername("kh");
		bds.setPassword("kh");
		bds.setInitialSize(10);
}

public static CafeDAO getInstance() {
		// ì´ë¯¸ instanceë³€ìˆ˜ì— ì¸ìŠ¤í„´ìŠ¤ê°€ ë‹´ê²¨ ìˆë‹¤ë©´ ê·¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë„ë¡ êµ¬ì„±.
		// == DBCP Connection Poolì„ í•˜ë‚˜ë§Œ ë§Œë“¤ê² ë‹¤.
		if(instance == null) {
			instance = new CafeDAO();
		}
		return instance;
}

// ì»¤ë„¥ì…˜ í’€ì— ìˆëŠ” ì»¤ë„¥ì…˜ì„ êº¼ë‚´ì„œ ë°˜í™˜í•´ì£¼ëŠ” ë©”ì„œë“œ
public Connection getConnection() throws Exception {
	return bds.getConnection();
}

```

```toc

```
