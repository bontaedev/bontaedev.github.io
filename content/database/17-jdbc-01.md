---
emoji: ğŸª¤
title: JDBC 1ì¼ì°¨ - JDBC ê°œìš”
date: '2022-04-11 20:21:00'
author: bontaedev
tags: database jdbc webdev study
categories: database
---

## JDBC

- `JDBC (Java Database Connectivity)` : ìë°”ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ì™€ ì—°ê²°í•´ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬
- sql ëª…ë ¹ë¬¸ì„ ìë°”ì—ì„œ ìˆ˜í–‰í•˜ë©´ DBë¡œ ì „ë‹¬
- DBMSì˜ ì¢…ë¥˜ì— ë”°ë¼ì„œ JDBCì˜ ì¢…ë¥˜ë„ ë‹¬ë¼ì§„ë‹¤.
- ì—¬ê¸°ì„œëŠ” Oracle (OJDBC) ë¥¼ ì‚¬ìš©

## JDBC ë“œë¼ì´ë²„ ë‹¤ìš´ë¡œë“œì™€ ì„¸íŒ…

## JDBCë¡œ ìë°”í”„ë¡œê·¸ë¨ê³¼ DB ì—°ë™í•˜ê¸°

ê¸°ë³¸ì ì¸ DBì—°ê²° ì…‹íŒ…

- Connnection ê°ì²´ ìƒì„±
- DriverManager í´ë˜ìŠ¤ì˜ getConnection()ì„ í†µí•´ ê°ì²´ ìƒì„±
- getConnection(url, username, password)

```java
try (Connection con = DriverManager.getConnection(
			"jdbc:oracle:thin:@localhost:1521:xe"
			, "id" // id
			, "pw" // pw
			)) {
			System.out.println("DB connection success!");
		} catch (Exception e) {
			e.printStackTrace();
		}
```

## ê¸°ë³¸ì ì¸ CRUD ê¸°ëŠ¥ êµ¬í˜„í•´ë³´ê¸°

- `Statement` ê°ì²´ : ì˜¤ë¼í´ì—ê²Œ sqlë¬¸ì„ ì „ì†¡í•´ ì¿¼ë¦¬ì˜ ê²°ê³¼ë¥¼ ìš”ì²­í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ê°ì²´
- `executeUpdate()` : í–‰ì— ë³€í™”ë¥¼ ì¤„ ë•Œ ì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œ. ì¿¼ë¦¬ë¬¸ì˜ INSERT, UPDATE, DELETEì™€ ì‚¬ìš©
  - ë©”ì„œë“œì˜ ë°˜í™˜ê°’ìœ¼ë¡œ ë‚˜ì˜¤ëŠ” ì •ìˆ˜ëŠ” ì¸ìê°’ìœ¼ë¡œ ë„˜ê²¨ì¤€ ì¿¼ë¦¬ë¬¸ì„ í†µí•´ì„œ ì˜í–¥ì„ ë°›ì€ í–‰ì˜ ê°œìˆ˜

<br>

- INSERT ê¸°ëŠ¥ (ë°ì´í„° ì‚½ì…)

```java
String url = "jdbc:oracle:thin:@localhost:1521:xe";
String username = "username";
String password = "password";

try (Connection con = DriverManager.getConnection(url, username, password);
			 Statement st = con.createStatement();
		){
			System.out.println("DBì ‘ì† ì„±ê³µ");

			String sql = "insert into cafe values(seq_cafe.nextval, 'ì•„ì´ìŠ¤ì•„ë©”ë¦¬ì¹´ë…¸',2400, sysdate)";
			int rs = st.executeUpdate(sql);

			if (rs > 0) System.out.println("ë°ì´í„°ì¶”ê°€ì„±ê³µ");
			else System.out.println("ë°ì´í„°ì¶”ê°€ì‹¤íŒ¨");

		} catch (Exception e) {
			e.printStackTrace();
		}

```

<br>

- UPDATE ê¸°ëŠ¥ (ë°ì´í„° ìˆ˜ì •)

```java
...
try (Connection con = DriverManager.getConnection(url, username, password);
			 Statement st = con.createStatement();
			){

			System.out.println("db conn success");

			String sql = "update cafe set product_name = 'ë°”ë‹ë¼ë¼ë–¼', price = 4500 where product_id = 1";

			int rs = st.executeUpdate(sql);
			if (rs > 0) System.out.println("ì„±ê³µ");
			else System.out.println("ì‹¤íŒ¨");

		} catch (Exception e) {
			e.printStackTrace();
		}
```

<br>

- DELETE ê¸°ëŠ¥ (ë°ì´í„° ì‚­ì œ)

```java
...
try (Connection con = DriverManager.getConnection(url, username, password)){
			Statement st = con.createStatement();

			System.out.println("conn success!");

			// product_id ê°€ 2ì¸ ë°ì´í„° ì‚­ì œ
			String sql = "delete from cafe where product_id = 2";

			int rs = st.executeUpdate(sql);
			if (rs > 0) System.out.println("ë°ì´í„° ì‚­ì œ ì„±ê³µ");
			else System.out.println("ì‚­ì œ ì‹¤íŒ¨");

			} catch (Exception e) {
			e.printStackTrace();
		}
```

<br>

- SELECT ê¸°ëŠ¥ (ë°ì´í„° ì¡°íšŒ)
  - `executeQuery()` : ì¿¼ë¦¬ë¬¸ì„ ì‹¤í–‰ì‹œí‚¤ê³  ë°˜í™˜ê°’ì„ ResultSet(ì§ˆì˜ê²°ê³¼)ì„ ê°ì²´ë¡œ ë°˜í™˜ë°›ëŠ”ë‹¤.
  - `ResultSet` : ResultSetì´ ë°˜í™˜ë  ë•Œ ì»¤ì„œê°€ ìˆëŠ”ë°, ì´ˆê¸°ì—ëŠ” ë°˜í™˜ë°›ì€ ê°’ì˜ ì²«ë²ˆì§¸ í–‰ ìœ„ìª½ì„ ê°€ë¦¬í‚¨ë‹¤. ë”°ë¼ì„œ ì»¤ì„œë¥¼ ë‚´ë ¤ì„œ ì²«ë²ˆì§¸ í–‰ì„ ê°€ë¦¬í‚¤ë„ë¡ í•´ì•¼í•œë‹¤.
  - `rs.next()` : rs.next()ê°€ ë°˜í™˜í•˜ëŠ” ê°’ì€ ë§Œì•½ ì»¤ì„œë¥¼ ì•„ë˜í–‰ìœ¼ë¡œ ë‚´ë ¸ì„ ë•Œ ë‹¤ìŒ í–‰ì´ ì¡´ì¬í•˜ëŠ”ì§€ boolê°’ìœ¼ë¡œ ë°˜í™˜ (true/false)
  - ResultSetì—ì„œ ê°’ì„ ì–»ì–´ë‚´ëŠ” ë°©ë²• : getXXX..() - ì˜¤ë¼í´ì˜ ì¸ë±ìŠ¤ë‚˜ ì»¬ëŸ¼ëª…ì„ ì‚¬ìš©í•´ ì¡°íšŒ

```java
try (Connection con = DriverManager.getConnection(url, username, password);
			 Statement st = con.createStatement();
		){

			System.out.println("DB ì ‘ì† ì„±ê³µ");

			String sql = "select * from cafe where product_id = 1";
			ResultSet rs = st.executeQuery(sql);
			System.out.println("rs : " + rs); // ê°ì²´ì˜ ì£¼ì†Œê°’

			System.out.println("rs.next() : " + rs.next());

			// ì»¤ì„œê°€ ë°ì´í„°ë¥¼ ê°€ë¦¬í‚¤ê³  ìˆëŠ” ìƒíƒœì—ì„œ ê°’ì„ ì–»ì–´ë‚´ëŠ” ë°©ë²•
			// 1. ì˜¤ë¼í´ì˜ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•
      (product_id(1) product_name(2) price(3) reg_date(4))

			System.out.println(rs.getInt(1));
			System.out.println(rs.getString(2));
			System.out.println(rs.getInt(3));
			System.out.println(rs.getDate(4));

			// ë§Œì•½ ì»¤ì„œë¥¼ ë‚´ë ¸ì„ë•Œ í–‰ì´ ì¡´ì¬í•œë‹¤ë©´ ê°’ì„ ì¶œë ¥í•˜ê² ë‹¤.
			if (rs.next()) {
				System.out.println(rs.getInt(1) +
						" : " + rs.getString(2) +
						" : " + rs.getInt(3) +
						" : " + rs.getDate(4));
			}


			// 2. ì»¬ëŸ¼ëª…ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•
			if (rs.next()) {
				System.out.println(rs.getInt("product_id")
						+ " : " + rs.getString("product_name")
						+ " : " + rs.getInt("price")
						+ " : " + rs.getDate("reg_date"));
			}

		} catch (Exception e) {
			e.printStackTrace();
		}

```

```java
// ë°ì´í„°ê°€ ì¡´ì¬í• ë•Œë§Œ ì¶œë ¥
String sql = "select * from cafe";
ResultSet rs = st.executeQuery(sql);

  while (rs.next()) {
    System.out.println(rs.getInt(1)
		  + " : " + rs.getString(2)
			+ " : " + rs.getInt(3)
			+ " : " + rs.getDate(4));
	}
```

## ì‹¤ìŠµë¬¸ì œ : Student

```toc

```
